# 技術Q&A: 2026-02-10

### Spring CLI で初期化する必要があるか？

不要。設計書に依存関係・パッケージ構成が明確に定義済みのため、pom.xml とディレクトリ構造を手動で作成する方が設計書に正確に準拠できる。Spring Initializr が生成する不要なボイラープレートを削除する手間も省ける。

### parent が spring-boot-starter-parent でなければ Spring Boot Starters は使えないのか？

parent がなくても使える。方法は2つある:

- **方法A: `<parent>` で継承** — バージョン自動解決 + プラグイン設定の自動化。最も簡単。
- **方法B: BOM のみ** — `<dependencyManagement>` に `spring-boot-dependencies` を追加する。社内に別の parent pom がある場合に使う。バージョン自動解決はできるが、プラグイン設定は自分で書く必要がある。

### BOM とは何か？

BOM（Bill of Materials）は「ライブラリのバージョン一覧表」。`<dependencyManagement>` に BOM を宣言すると、`<dependencies>` 内の該当ライブラリで `<version>` を省略できる。複数のライブラリのバージョンを一箇所で管理し、不整合を防ぐ仕組み。

### BOM を使うことで依存関係のあるライブラリに一貫性のあるバージョン管理ができるのか？

その通り。さらにバージョンアップ時の安全性もメリット。BOM の1箇所を変更するだけで関連ライブラリすべてのバージョンが揃う。書き換え忘れによるバージョン不整合を防げる。Spring Boot parent は内部で100以上のライブラリバージョンを管理している。

### SpringApplication の起動処理はどう書くか？

`SpringApplication.run(FitbitAgentApplication.class, args);` と書く。第1引数にクラス自体の情報（`.class`）、第2引数に `main` メソッドが受け取った `args` を渡す。Spring Boot はこのクラス情報を起点にパッケージ内のコンポーネントを探す。

### package-info.java は実装前に一括で書くものか？また JavaDoc でパッケージを可視化するために作るものか？

一般的にはプロジェクト初期化で全パッケージに一括作成するのは稀で、クラス追加時に必要に応じて書くことが多い。今回は設計書通りのパッケージ構成を Git 管理するために配置した。本来の役割は (1) パッケージレベルの JavaDoc を書く場所、(2) パッケージレベルのアノテーションを宣言する場所。

### prompts/ ディレクトリの役割と .gitkeep を配置する理由

`prompts/` は AI コーチング機能で使うプロンプトテンプレート（daily-advice.txt 等）を保管する場所（`docs/architecture.md` 7.2節）。プロンプトを Java コードにハードコーディングせず外出しすることで、修正時に再コンパイル不要・レビューしやすい。

`.gitkeep` は Git が空ディレクトリを管理できない仕様への対処。ダミーファイルとして置く開発者間の慣習で、Git の公式機能ではない。後続タスクで実ファイルを追加したら削除して構わない。

### driverClassName が不要な理由

Spring Boot の自動設定（Auto Configuration）が JDBC URL のプレフィックスからドライバを自動判定するため。`jdbc:postgresql://` なら `org.postgresql.Driver` が自動選択される。明示的に書くと、URL とドライバの不一致リスクや、ライブラリのバージョンアップでクラス名が変わるリスクがある（MySQL で実際に発生した歴史がある）。

### YAML で環境変数を参照する方法

`${環境変数名}` と書く。Spring Boot が起動時に環境変数の値に置き換える。デフォルト値を指定する場合は `${DB_USERNAME:postgres}` のように `:` の後にデフォルト値を書く。
