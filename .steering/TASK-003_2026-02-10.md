# TASK-003: Docker Compose ローカル開発環境構築

- **優先度**: 高
- **ステータス**: 完了
- **ブロック**: ~~TASK-001~~ → 解消済み
- **受入条件**:
  - [ ] `docker compose up` で PostgreSQL が起動する
  - [ ] Spring Boot から PostgreSQL に接続できる

---

## 作業手順

- [x] Step 1: `docker/docker-compose.yml` の作成
- [x] Step 2: `.env` ファイルの作成
- [x] Step 3: `docker compose up` で PostgreSQL 起動確認
- [x] Step 4: Spring Boot からの DB 接続確認

---

### Step 1: `docker/docker-compose.yml` の作成

PostgreSQL コンテナを定義する。

設定項目:
- イメージ: `postgres:16`
- コンテナ名: `fitbit-agent-db`
- ポート: `5432:5432`
- 環境変数: `POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD`（.env から読み込み）
- ボリューム: データ永続化用の named volume

参照: `docs/architecture.md` 5.3節

### Step 2: `.env` ファイルの作成

`docker/` 配下に `.env` を作成し、DB 接続情報を定義する。

- `POSTGRES_DB=fitbit_agent`
- `POSTGRES_USER=postgres`
- `POSTGRES_PASSWORD=postgres`

※ `.env` は `.gitignore` に追加してリポジトリに含めない。テンプレートとして `.env.example` を用意する。

### Step 3: `docker compose up` で PostgreSQL 起動確認

```bash
cd docker && docker compose up -d
```

PostgreSQL が起動し、`docker compose ps` でステータスが `running` であることを確認する。

### Step 4: Spring Boot からの DB 接続確認

```bash
cd backend && mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

Spring Boot が起動し、DB 接続エラーが出ないことを確認する。
