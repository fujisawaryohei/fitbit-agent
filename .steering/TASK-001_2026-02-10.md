# TASK-001: Spring Boot プロジェクト初期化

- **優先度**: 高
- **ステータス**: 進行中
- **受入条件**:
  - [ ] `backend/pom.xml` に必要な依存関係が定義されている
  - [ ] `mvn compile` が成功する
  - [ ] パッケージ構成が docs/architecture.md に準拠している

---

## 作業手順

### Step 1: ディレクトリ構成の作成 ✅

Maven 標準ディレクトリ構造を作成する。

```
backend/
└── src/
    ├── main/
    │   ├── java/com/fitbitagent/
    │   └── resources/
    └── test/
        ├── java/com/fitbitagent/
        └── resources/
```

### Step 2: `backend/pom.xml` の作成 ✅

Spring Boot 3.4.1 / Java 21 の Maven プロジェクト定義ファイル。

依存関係:
- spring-boot-starter-web, security, oauth2-client, data-jpa, validation, webflux
- flyway-core, flyway-database-postgresql
- postgresql (runtime)
- lombok (optional)
- spring-boot-starter-test, spring-security-test (test)
- testcontainers: junit-jupiter, postgresql (test)
- testcontainers-bom (dependencyManagement)

参照: `docs/architecture.md` 3.1節

### Step 3: エントリポイントの作成

`backend/src/main/java/com/fitbitagent/FitbitAgentApplication.java` を作成する。

- `@SpringBootApplication` アノテーション付きメインクラス
- `main` メソッドで `SpringApplication.run()` を呼ぶ

参照: `docs/architecture.md` 3.2節

### Step 4: 設定ファイルの作成

4つの YAML 設定ファイルを作成する。

| ファイル | パス | 内容 |
|---------|------|------|
| 共通設定 | `src/main/resources/application.yml` | アプリ名、JPA設定 (ddl-auto=validate, open-in-view=false) |
| 開発環境 | `src/main/resources/application-dev.yml` | PostgreSQL localhost接続、ログレベル DEBUG |
| 本番環境 | `src/main/resources/application-prod.yml` | 環境変数参照 (${DB_URL} 等) |
| テスト | `src/test/resources/application-test.yml` | ddl-auto=create-drop、Flyway無効 |

参照: `docs/architecture.md` 8.3節

### Step 5: パッケージ構成スケルトンの作成

各パッケージに `package-info.java` を配置する（14パッケージ）。

- controller, service, repository
- domain/entity, domain/enums
- client/fitbit, client/fitbit/dto, client/claude, client/claude/dto
- dto/request, dto/response
- config, exception

追加:
- `src/main/resources/prompts/.gitkeep`
- `src/test/java/com/fitbitagent/` 配下に controller, service, repository, client ディレクトリ

参照: `docs/architecture.md` 3.2節、`docs/repository-structure.md` 3節

### Step 6: `backend/.gitignore` の作成

Maven ビルド成果物・IDE 設定ファイルの除外設定。

### 最終確認

```bash
cd backend && mvn compile
```

`BUILD SUCCESS` を確認する。
